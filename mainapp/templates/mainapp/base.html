{% load static %}

<!DOCTYPE html>
<html>
<head>
	<title>FamilyNotice</title>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

	 <script>
		 $(function(){
				$.ajax({
								 url: "{% url 'List of lists' %}",
								 success: function(data){
									 console.log(data)
									for(var i=0;i<data.list.length; i++){
											var the_id = data.list[i].id
											$(".To_do_list").append("<li class='ToDoListRow' id=" + data.list[i].id + ">"
												 + "<a href='/tasks/" + the_id + "'>" + data.list[i].nameOfList + "</a><br>"
                         + "<button class='DeleteButton' id=" + data.list[i].id + "> Delete </button></li>")
									}

									$(".DeleteButton").click(function(){
											var deleteConf = confirm("Are you sure you want to delete this List permanently?");
											if (deleteConf == true){
													 console.log($(this).attr("id"))
													 csrfToken = $('input[name=csrfmiddlewaretoken]').val()
																 $.ajax({
																	 url: "{% url 'delete list' %}",
																	 type : "DELETE",
																	 dataType: 'json',
																	 data: $(this).attr('id'),
																	 beforeSend: function (xhr) {
																					xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token}}');
																	 },
																	 success: function(data){
																					console.log(data)
																					$('#'+data.values+'').remove()
																					console.log('memeber is deleted')
																					alert("The employee is deleted!");
																	 }
													 })
											 }
											else{
													 alert("The employee is not deleted!");
												 }
									 })
									 //END DELETE
								 }
				})
			})
	 </script>

</head>
<style>
	.BlockContent{
		max-width: 75%;
		display: block;
		margin-left: auto;
		margin-right: auto;
		padding: 3%;
	}

	.todocontainer{
		display: grid;
		grid-column-gap: 5vw;
		padding: 3vw;
		grid-template-columns:
			50% 50%;
		grid-template-areas:
			'todoleft todoright';
	}

	.todoleft{
			grid-area: todoleft;
	}
	.todoright{
			grid-area: todoright;
	}
</style>
<body>
      <!-- NAVIGAATION BAR -->
      <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="">FamilyNotice</a>
          </div>
          <!-- NAV BAR LEFT -->
          <ul class="nav navbar-nav">
            <li><a href="">Closed Auction</a></li>
						<li><a href="">Post a new Item</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">

            <!-- SIGN UP -->
						{% if user.is_authenticated %}
						<li><a><span class="glyphicon"></span> {{user}}</a></li>
					 	<li><a href="{% url 'logout' %}"><span class="glyphicon glyphicon-user"></span> Logout </a></li>
					 	{% else %}
					 	<li><a href=""><span class="glyphicon glyphicon-user"></span> Sign Up </a></li>
					 	<!-- LOGIN -->
					 	<li><a href="{% url 'login' %}"><span class="glyphicon glyphicon-log-in"></span> Login </a></li>
					 	{% endif %}
          </ul>
        </div>
      </nav>
  <br>
	<br>
	{% block content %}
	{% endblock %}
  {% block scripts %}{% endblock %}
	<br>
</body>
</html>
